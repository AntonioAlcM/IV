Práctica 4:  Diseño del soporte virtual al desarrollo y despliegue de una aplicación
=====================================

Descripción
-----------------

Finalizar el proyecto individual con despliegue automático a las plataformas de desarrollo, de prueba y de producción. 

Prerrequisitos
--------------------

Haber alcanzado
[el 50% de los objetivos de los temas de uso de sistemas de virtualización y gestión de configuraciones](../temas/Gestion_de_configuraciones.md). Sin
este requisito este hito del proyecto estará suspenso.  

Explicación
----------------

En la asignatura se ha visto como crear
[usar máquinas virtuales completas](../temas/Uso_de_Sistemas.md) y
como
[provisionar las aplicaciones y servicios necesarios y hacerlo de forma ágil y reproducible](../temas/Gestion_de_configuraciones.md). 
El ciclo de desarrollo de un *DevOps* es el siguiente
1. Provisionamiento para desarrollo.
2. Creación de tests unitarios, de cobertura y de integración y configuración de la integración continua.
2. Provisionamiento de las máquinas de prueba (*staging*) y de
producción. Estas máquinas pueden ser tanto PaaS como IaaS. Esto se ha
hecho en los dos hitos anteriores. 
3. Configuración del despliegue de las desarrollo a las [máquinas de
*staging*](http://en.wikipedia.org/wiki/Staging_site) y eventualmente
a las de producción. Este despliegue *tiene que ser automático*. 

Lo que se pretende con este ciclo es que el tiempo que pasa desde la
incorporación de un nuevo desarrollador a un equipo hasta que es capaz
de pasar a producción el desarrollo sea lo menor posible, de forma que
el uso de recursos y el despliegue de los mismos sea un proceso
ágil. Previo a tal proceso estará la elección de tales entornos de
desarrollo y producción y el test de los mismos, pero en el momento
qeu se comience el desarrollo, o paralelamente al mismo, las
decisiones deben estar tomadas y las máquinas virtuales testeadas y
provisionadas, con todas las configuraciones preparadas y almacenadas
en un repositorio.

Este hito es el final de la asignatura. La documentación debe estar en
un solo documento y este documento o bien ser el `README.md` del
proyecto o estar en la rama `gh-pages` del mismo. La licencia debe
estar en el directorio principal. Los tests y los despliegue deben
hacerse automáticamente con una sola orden tal como `make install` o
`grunt` y deben usarse herramientas estándar para el mismo. Si se ha
configurado un despliegue automático desde GitHub, debe indicarse
claramente en la documentación.

Si el proyecto está coordinado con otros, también debe
indicarse claramente y la documentación deberá aclarar dónde se configuran
los *endpoints* o puntos de entrada al API de esos otros proyectos,
así como si hay un script que despliegue todos los proyectos en una
sola aplicación y donde está desplegada. Esto se valorará
adicionalmente. 

El despliegue de la aplicación deberá hacerse en una máquina virtual
que se haya configurado automáticamente y a la que se haya hecho
también el despliegue automáticamente. Esta máquina virtual debe ser
una infraestructura como servicio, tal como Azure o cualquier otra que
se proporcione de forma gratuita.


Entrega de la práctica
--------------------------------

Aunque los proyectos se hacen y se entregan de forma individual, en
este hito se permitirá que haya *commits* de otros miembros del
equipo, siempre que se hayan hecho mediante *pull requests* y además
quede claro, en una tarea, qué es lo que han hecho.

Lo esencial de esta práctica es
1. Que se encuentre efectivamente desplegada en una máquina virtual
   remota, de las proporcionadas por el profesor o alguna otra.
2. Que esa máquina virtual sea un IaaS y *se haya configurado desde 0*
   usando un script de provisionamiento. Ese *script* se podrá hacer
   en cualquier lenguaje de los vistos en la asignatura o alguno que
   no se haya visto (Puppet, Rex o Salt).
3. El despliegue tiene que hacerse automáticamente a dos niveles:
   usando una herramienta de despliegue automático como Vagrant o
   Puppet para crear las máquinas virtuales y desplegar una
   configuración en ella, configuración hecha con Ansible, Chef o
   algún otro sistema, y el despliegue y ejecución de la aplicación
   tendrá que hacerse automáticamente con alguna herramienta de
   despliegue tipo Capistrano, Fabric o Flightplan.

El objetivo, en todo caso, es que la reproducción sea escalable y
reproducible, de forma que partiendo *desde 0* (una cuenta en algún
proveedor de IaaS) se pueda echar una aplicación a funcionar
ejecutando solamente *scripts* y sin ningún *input* por parte del
usuario.

>Si hay que configurar claves SSH o de bases de datos tendrá que
>hacerse en un fichero de configuración o en un directorio
>previamente. Tanto Vagrant como las otras herramientas trabajan con
>variables de entorno o ficheros de configuración.

Aunque sea evidente, conviene recordar dos cosas
* Se trata de una práctica de una asignatura, Infraestructura
  Virtual. Se evaluarán, de forma casi exclusiva, el trabajo del 
  alumno que muestre que efectivamente se han asimilado los contenidos
  de la asignatura. 
* Lo que no está en GitHub no se puede evaluar. 

Por otro lado, la entrega se hará de la forma habitual, modificando el
[documento](https://github.com/JJ/IV-2015-16/blob/master/practicas/final.md)
y haciendo un *pull request*. Instrucciones: 

* En este *pull request* deberá indicarse claramente el proyecto que
  es y que se trata de la práctica final *y tendrá que hacerlo el
  propio usuario*. Si el proyecto está coordinado con otros, se debe
  agrupar *claramente* en el fichero y también indicar
  el punto de acceso común a todos ellos.
* Un enlace a la aplicación desplegada en un IaaS.
* Un enlace al repositorio.

Una vez hecha la entrega, *en la fecha marcada para el examen* se hará
una presentación oral, por grupos, del proyecto, conjuntamente con
DAI. Esa presentación será optativa, pero se valorará para la nota de
la práctica. 

Valoración
--------------

La puntuación de esta práctica es superior al resto, contando como se
indicó al principio el doble que los otros hitos. 

* 2 puntos: provisionamiento correcta y claramente explicada.
* 2 puntos: herramienta de orquestación (que cree y despliegue las
  máquinas virtuales con Vagrant) correcta y bien explicada.
* 2 puntos: Despliegue hecho correctamente en un IaaS como Azure.
* 2 puntos: Presentación oral y coordinación del proyecto con otros.
* 2 puntos: Herramienta de despliegue clara y bien configurada. Se
  valorará que se use una herramienta adicional a la herramienta de
  provisionamiento. 
  
Se recuerda que todo lo anterior se califica *de forma individual*. Si
hay alguna copia a estas alturas del curso, la práctica estará
suspensa y sin posibilidad de reenvío.
